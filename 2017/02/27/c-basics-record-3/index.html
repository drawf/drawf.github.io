<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="测试一下描述"><title>C语言基础知识补习③ | erwa'blog</title><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/5.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">C语言基础知识补习③</h1><a id="logo" href="/.">erwa'blog</a><p class="description">非常高兴你能来到这里！</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">C语言基础知识补习③</h1><div class="post-meta">Feb 27, 2017<span> | </span><span class="category"><a href="/categories/tech/">tech</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a data-thread-key="2017/02/27/c-basics-record-3/" href="/2017/02/27/c-basics-record-3/#comments" class="ds-thread-count"></a><div class="clear"><div id="toc" class="toc-article"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#放在前边"><span class="toc-number">1.</span> <span class="toc-text">放在前边</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#C-C-的开发工具"><span class="toc-number">2.</span> <span class="toc-text">C/C++的开发工具</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#C语言相关"><span class="toc-number">3.</span> <span class="toc-text">C语言相关</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#类型别名"><span class="toc-number">3.1.</span> <span class="toc-text">类型别名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#共用体（联合体）"><span class="toc-number">3.2.</span> <span class="toc-text">共用体（联合体）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#枚举"><span class="toc-number">3.3.</span> <span class="toc-text">枚举</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#文件IO操作"><span class="toc-number">3.4.</span> <span class="toc-text">文件IO操作</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#文件的加解密"><span class="toc-number">3.5.</span> <span class="toc-text">文件的加解密</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#获取文件大小"><span class="toc-number">3.6.</span> <span class="toc-text">获取文件大小</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#预编译"><span class="toc-number">3.7.</span> <span class="toc-text">预编译</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#放在后边"><span class="toc-number">4.</span> <span class="toc-text">放在后边</span></a></li></ol></div></div><div class="post-content"><h3 id="放在前边"><a href="#放在前边" class="headerlink" title="放在前边"></a>放在前边</h3><blockquote>
<p>注：本篇是C语言的基础知识补习的第三篇，共三篇，需要读者有一定的编程经验。</p>
</blockquote>
<p><a href="https://github.com/drawf/demo.c" target="_blank" rel="external">demo.c传送门</a></p>
<h3 id="C-C-的开发工具"><a href="#C-C-的开发工具" class="headerlink" title="C/C++的开发工具"></a>C/C++的开发工具</h3><p>链接: <a href="https://pan.baidu.com/s/1eSh1Uuu" target="_blank" rel="external">https://pan.baidu.com/s/1eSh1Uuu</a> 密码: sp3t</p>
<p>CLion for Mac 2016.3 版本，CMake workflow、Modern C and C++、Semantic highlighting等新特性，<br>CLion 是一款由JetBrains出品的强大的C/C++开发工具，支持Windows、Mac、Linux平台，是现代的智能集成开发工具，支持各种功能，如代码自动完成、提醒、版本控制工具等，支持C、C++、 C++11 等标准，非常的不错！</p>
<h3 id="C语言相关"><a href="#C语言相关" class="headerlink" title="C语言相关"></a>C语言相关</h3><h4 id="类型别名"><a href="#类型别名" class="headerlink" title="类型别名"></a>类型别名</h4><p>关键字为<code>typedef</code>，特点如下：</p>
<ol>
<li>不同别名代表在做不同的事情，如：typedef int jint</li>
<li>不同的情况下，使用不同的别名</li>
<li>书写简介</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">typedef <span class="keyword">char</span> *Name;<span class="comment">//简单别名</span></div><div class="line"></div><div class="line">struct ImageInfo &#123;</div><div class="line">    <span class="keyword">char</span> *name;</div><div class="line">    <span class="keyword">int</span> size;</div><div class="line">    <span class="keyword">char</span> *path;</div><div class="line">&#125;;</div><div class="line"></div><div class="line">typedef ImageInfo aImg;<span class="comment">//结构体别名，只是个新名字，不是变量</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">reImageName</span><span class="params">(ImageInfo *pImageInfo, <span class="keyword">char</span> *msg)</span> </span>&#123;</div><div class="line">    pImageInfo-&gt;name = msg;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">testAlias</span><span class="params">()</span> </span>&#123;</div><div class="line">    Name a = <span class="string">"小李子"</span>;<span class="comment">//Name 为 char* 类型</span></div><div class="line">    printf(<span class="string">"Name的值：%s\n"</span>, a);</div><div class="line">    <span class="comment">//Name的值：小李子</span></div><div class="line"></div><div class="line">    aImg img = &#123;<span class="string">"风景图"</span>, <span class="number">122</span>, <span class="string">"我是图片路径"</span>&#125;;</div><div class="line">    reImageName(&amp;img, <span class="string">"美女图"</span>);</div><div class="line">    printf(<span class="string">"name:%s ==&gt; size:%d ==&gt; path:%s\n"</span>, img.name, img.size, img.path);</div><div class="line">    <span class="comment">//name:美女图 ==&gt; size:122 ==&gt; path:我是图片路径</span></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="共用体（联合体）"><a href="#共用体（联合体）" class="headerlink" title="共用体（联合体）"></a>共用体（联合体）</h4><p>不同类型的变量以相互覆盖的方式共用一段内存，始终是最后一个赋值的成员存在，有利于节省内存，共用体的大小为最大的成员的大小，关键字为<code>union</code>。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">union mVal &#123;</div><div class="line">    <span class="keyword">char</span> c;<span class="comment">//1 byte</span></div><div class="line">    <span class="keyword">short</span> s;<span class="comment">//2 byte</span></div><div class="line">    <span class="keyword">int</span> i;<span class="comment">//4 byte</span></div><div class="line">    <span class="keyword">long</span> l;<span class="comment">//8 byte</span></div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">testUnion</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">    mVal u;</div><div class="line">    u.c = <span class="string">'d'</span>;</div><div class="line">    u.i = <span class="number">10</span>;<span class="comment">//最后一次赋值有效</span></div><div class="line"></div><div class="line">    printf(<span class="string">"char:%c ==&gt; int:%d ==&gt; 大小：%d\n"</span>, u.c, u.i, sizeof(u));</div><div class="line">    <span class="comment">//char:</span></div><div class="line">    <span class="comment">//==&gt; int:10 ==&gt; 大小：8</span></div><div class="line">    <span class="comment">//u.c的值被损坏了，使用共同体的主要目的是，同一时间只使用一个变量</span></div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="枚举"><a href="#枚举" class="headerlink" title="枚举"></a>枚举</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*枚举，列举所有的情况*/</span></div><div class="line"><span class="keyword">enum</span> NetStatus &#123;</div><div class="line">    NET_START,</div><div class="line">    NET_LOADING,</div><div class="line">    NET_SUCCESS,</div><div class="line">    NET_ERROR</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="comment">/*模拟网络请求*/</span></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">httpRequest</span><span class="params">(<span class="keyword">char</span> *url, <span class="keyword">void</span>(*pCallback)</span><span class="params">(<span class="keyword">enum</span> NetStatus, <span class="keyword">char</span> *)</span>) </span>&#123;</div><div class="line"></div><div class="line">    printf(<span class="string">"请求地址为：%s\n"</span>, url);</div><div class="line">    <span class="comment">//请求地址为：http://baidu.com</span></div><div class="line"></div><div class="line">    pCallback(NET_START, <span class="string">"开始请求网络.."</span>);</div><div class="line">    pCallback(NET_LOADING, <span class="string">"加载中.."</span>);</div><div class="line">    sleep(<span class="number">2</span>);</div><div class="line">    pCallback(NET_SUCCESS, <span class="string">"请求成功"</span>);</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">httpCallback</span><span class="params">(<span class="keyword">enum</span> NetStatus status, <span class="keyword">char</span> *result)</span> </span>&#123;</div><div class="line">    <span class="keyword">switch</span> (status) &#123;</div><div class="line">        <span class="keyword">case</span> NET_START:</div><div class="line">            printf(<span class="string">"onStart:%s\n"</span>, result);</div><div class="line">            <span class="comment">//onStart:开始请求网络..</span></div><div class="line">            <span class="keyword">break</span>;</div><div class="line">        <span class="keyword">case</span> NET_LOADING:</div><div class="line">            printf(<span class="string">"loading:%s\n"</span>, result);</div><div class="line">            <span class="comment">//loading:加载中..</span></div><div class="line">            <span class="keyword">break</span>;</div><div class="line">        <span class="keyword">case</span> NET_SUCCESS:</div><div class="line">            printf(<span class="string">"success:%s\n"</span>, result);</div><div class="line">            <span class="comment">//success:请求成功</span></div><div class="line">            <span class="keyword">break</span>;</div><div class="line">        <span class="keyword">case</span> NET_ERROR:</div><div class="line">            printf(<span class="string">"error:%s\n"</span>, result);</div><div class="line">            <span class="keyword">break</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">testEnum</span><span class="params">()</span> </span>&#123;</div><div class="line">    httpRequest(<span class="string">"http://baidu.com"</span>, httpCallback);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="文件IO操作"><a href="#文件IO操作" class="headerlink" title="文件IO操作"></a>文件IO操作</h4><p>在编写应用程序的时候，文件IO操作是不可避免的，小到日志本地化收集，大到数据格式化存储，都需要使用文件IO来操作文件流进行数据处理。</p>
<p>文件IO操作的一般步骤：</p>
<ol>
<li>创建一个File对象</li>
<li>构建输入、输出流</li>
<li>创建缓冲区，并读写数据</li>
<li>关闭流</li>
</ol>
<p>C语言中文件操作主要依靠<em>操作模式</em>来辨别是输入流还是输出流，mode：</p>
<ol>
<li>r 打开只读文件，该文件必须存在。</li>
<li>r+ 打开可读写的文件，该文件必须存在。</li>
<li>w 打开只写文件，若文件存在则文件长度清为0，即该文件内容会消失，若文件不存在则建立该文件。</li>
<li>w+ 打开可读写文件，若文件存在则文件长度清为零，即该文件内容会消失，若文件不存在则建立该文件。</li>
<li>a 以追加的方式打开只写文件，若文件不存在，则会建立该文件，如果文件存在，写入的数据会被加到文件尾，即文件原先的内容会被保留。</li>
<li>a+ 以追加方式打开可读写的文件，若文件不存在，则会建立该文件，如果文件存在，写入的数据会被加到文件尾后，即文件原先的内容会被保留。</li>
</ol>
<blockquote>
<p>注：上述操作模式是针对文本文件的，如果要操作二进制文件，则需要在上述操作符后面加上 b，如rb、wb、ab等。</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">testWriteTextFile</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">char</span> *path = <span class="string">"/Users/drawf/Desktop/test.txt"</span>;</div><div class="line">    <span class="keyword">char</span> *content = <span class="string">"我是测试内容！"</span>;</div><div class="line"></div><div class="line">    FILE *pFILE = fopen(path, <span class="string">"w"</span>);</div><div class="line">    <span class="keyword">if</span> (pFILE == NULL) &#123;</div><div class="line">        printf(<span class="string">"打开文件失败\n"</span>);</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    fputs(content, pFILE);<span class="comment">//写入文件</span></div><div class="line">    fclose(pFILE);<span class="comment">//关闭流</span></div><div class="line">    printf(<span class="string">"写入文件测试成功！\n"</span>);</div><div class="line">    <span class="comment">//写入文件测试成功！</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">testReadTextFile</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">char</span> *path = <span class="string">"/Users/drawf/Desktop/test.txt"</span>;</div><div class="line"></div><div class="line">    FILE *pFILE = fopen(path, <span class="string">"r"</span>);</div><div class="line">    <span class="keyword">if</span> (pFILE == NULL) &#123;</div><div class="line">        printf(<span class="string">"打开文件失败"</span>);</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">char</span> buffer[<span class="number">1024</span>];<span class="comment">//字符缓存区</span></div><div class="line">    <span class="keyword">while</span> (fgets(buffer, <span class="number">1024</span>, pFILE)) &#123;</div><div class="line">        printf(<span class="string">"%s\n"</span>, buffer);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    fclose(pFILE);</div><div class="line">    printf(<span class="string">"读取文件测试成功！\n"</span>);</div><div class="line">    <span class="comment">//我是测试内容，i am test content!</span></div><div class="line">    <span class="comment">//读取文件测试成功！</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">testBinaryFile</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">char</span> *currFile = <span class="string">"/Users/drawf/Desktop/test.txt"</span>;</div><div class="line">    <span class="keyword">char</span> *destFile = <span class="string">"/Users/drawf/Desktop/test_copy.txt"</span>;</div><div class="line"></div><div class="line">    FILE *pCurrFile = fopen(currFile, <span class="string">"rb"</span>);</div><div class="line">    FILE *pDestFile = fopen(destFile, <span class="string">"wb"</span>);</div><div class="line"></div><div class="line">    <span class="keyword">int</span> buffer[<span class="number">1024</span>];</div><div class="line">    <span class="keyword">int</span> len;</div><div class="line"></div><div class="line">    <span class="keyword">while</span> ((len = fread(buffer, sizeof(<span class="keyword">int</span>), <span class="number">1024</span>, pCurrFile)) != <span class="number">0</span>) &#123;</div><div class="line">        fwrite(buffer, sizeof(<span class="keyword">int</span>), len, pDestFile);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    fclose(pCurrFile);</div><div class="line">    fclose(pDestFile);</div><div class="line">    printf(<span class="string">"拷贝文件成功！"</span>);</div><div class="line">    <span class="comment">//拷贝文件成功！</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="文件的加解密"><a href="#文件的加解密" class="headerlink" title="文件的加解密"></a>文件的加解密</h4><p>文本、图片、视频等文件，都是以<em>二进制</em>存储在磁盘上，所以对文件内容进行二进制运算即可达到加密目的。</p>
<p><code>^</code>异或运算规则：相同得0，不同得1，异或两次得到本身</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="number">0</span> ^ <span class="number">0</span> = <span class="number">0</span></div><div class="line"><span class="number">0</span> ^ <span class="number">1</span> = <span class="number">1</span></div><div class="line"><span class="number">1</span> ^ <span class="number">0</span> = <span class="number">1</span></div><div class="line"><span class="number">1</span> ^ <span class="number">1</span> = <span class="number">0</span></div><div class="line"></div><div class="line"><span class="number">4</span>的二进制是：<span class="number">0100</span></div><div class="line"><span class="number">5</span>的二进制是：<span class="number">0101</span></div><div class="line">异或运算结果（加密）：<span class="number">4</span> ^ <span class="number">5</span> = <span class="number">0001</span></div><div class="line">异或运算结果（解密）：<span class="number">0001</span> ^ <span class="number">0101</span> == <span class="number">0100</span></div><div class="line">由上述可见，^ 一次为加密，再 ^ 一次就是解密</div></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">testEncryptFile</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">char</span> *currFile = <span class="string">"/Users/drawf/Desktop/test.txt"</span>;</div><div class="line">    <span class="keyword">char</span> *encryptedFile = <span class="string">"/Users/drawf/Desktop/test_encrypted.txt"</span>;</div><div class="line"></div><div class="line">    FILE *pCurrFile = fopen(currFile, <span class="string">"rb"</span>);</div><div class="line">    FILE *pEncryptedFile = fopen(encryptedFile, <span class="string">"wb"</span>);</div><div class="line"></div><div class="line">    <span class="keyword">int</span> buffer;</div><div class="line">    <span class="keyword">while</span> ((buffer = fgetc(pCurrFile)) != EOF) &#123;</div><div class="line">        fputc(buffer ^ <span class="number">8</span>, pEncryptedFile);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    fclose(pEncryptedFile);</div><div class="line">    fclose(pCurrFile);</div><div class="line">    printf(<span class="string">"文件加密成功！"</span>);</div><div class="line">    <span class="comment">//文件加密成功！</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">testDecryptFile</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">char</span> *encryptedFile = <span class="string">"/Users/drawf/Desktop/test_encrypted.txt"</span>;</div><div class="line">    <span class="keyword">char</span> *decryptedFile = <span class="string">"/Users/drawf/Desktop/test_decrypted.txt"</span>;</div><div class="line"></div><div class="line">    FILE *pEncryptedFile = fopen(encryptedFile, <span class="string">"rb"</span>);</div><div class="line">    FILE *pDecryptedFile = fopen(decryptedFile, <span class="string">"wb"</span>);</div><div class="line"></div><div class="line">    <span class="keyword">int</span> buffer;</div><div class="line">    <span class="keyword">while</span> ((buffer = fgetc(pEncryptedFile)) != EOF) &#123;</div><div class="line">        fputc(buffer ^ <span class="number">8</span>, pDecryptedFile);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    fclose(pDecryptedFile);</div><div class="line">    fclose(pEncryptedFile);</div><div class="line">    printf(<span class="string">"文件解密成功！"</span>);</div><div class="line">    <span class="comment">//文件解密成功！</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="获取文件大小"><a href="#获取文件大小" class="headerlink" title="获取文件大小"></a>获取文件大小</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">testGetFileSize</span><span class="params">()</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">char</span> *currFile = <span class="string">"/Users/drawf/Desktop/test.txt"</span>;</div><div class="line">    FILE *pFILE = fopen(currFile, <span class="string">"r"</span>);</div><div class="line"></div><div class="line">    <span class="comment">//重新定位文件指针，0是文件指针的偏移量，SEEK_END文件末尾</span></div><div class="line">    fseek(pFILE, <span class="number">0l</span>, SEEK_END);</div><div class="line">    <span class="comment">//返回当前的文件指针，相对于文件开头的位移量</span></div><div class="line">    <span class="keyword">long</span> size = ftell(pFILE);</div><div class="line">    fclose(pFILE);</div><div class="line"></div><div class="line">    printf(<span class="string">"文件大小：%ld bytes\n"</span>, size);</div><div class="line">    <span class="comment">//文件大小：21 bytes</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="预编译"><a href="#预编译" class="headerlink" title="预编译"></a>预编译</h4><p>预编译（预处理，宏定义，宏替换）这种叫法，关键字<code>#define</code>，其本质是替换文本。</p>
<p>预编译，主要在编译时期完成文本替换工作，常见的预编译指令有：#include、#ifndef、#endif、#define、#error等等。</p>
<p>C语言的执行过程：</p>
<ol>
<li>编译 ==&gt; 生成目标代码（.obj）</li>
<li>链接 ==&gt; 将目标代码与C函数库合并，生成最终的可执行文件</li>
<li>执行</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//预定义一个常量，宏常量没有类型，只做替换</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> MAX 100</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> NAME <span class="meta-string">"bob"</span></span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">testDefineConstant</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> i = <span class="number">99</span>;</div><div class="line">    <span class="keyword">if</span> (i &lt; MAX) &#123;</div><div class="line">        <span class="built_in">printf</span>(<span class="string">"结果：i&lt;Max\n"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="built_in">printf</span>(<span class="string">"结果：%s\n"</span>, NAME);</div><div class="line">    <span class="comment">//结果：i&lt;Max</span></div><div class="line">    <span class="comment">//结果：bob</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//预定义宏函数，来简化很长的函数名称</span></div><div class="line"><span class="meta">#<span class="meta-keyword">define</span> jni(NAME) _jni_define_func_##NAME()<span class="comment">//用 NAME 来替换 ##NAME</span></span></div><div class="line"></div><div class="line"><span class="keyword">void</span> _jni_define_func_write() &#123;</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"write\n"</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">void</span> _jni_define_func_read() &#123;</div><div class="line">    <span class="built_in">printf</span>(<span class="string">"read\n"</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">testDefineFunc</span><span class="params">()</span> </span>&#123;</div><div class="line">    jni(write);</div><div class="line">    jni(read);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="放在后边"><a href="#放在后边" class="headerlink" title="放在后边"></a>放在后边</h3><p>如有疑问和建议欢迎留言。</p>
</div><div class="tags"><a href="/tags/C语言/">C语言</a></div><div class="post-nav"><a href="/2017/02/22/c-basics-record-2/" class="next">C语言基础知识补习②</a></div><div data-thread-key="2017/02/27/c-basics-record-3/" data-title="C语言基础知识补习③" data-url="http://51erwa.com/2017/02/27/c-basics-record-3/" class="ds-share flat"><div class="ds-share-inline"><ul class="ds-share-icons-16"><li data-toggle="ds-share-icons-more"><a href="javascript:void(0);" class="ds-more">分享到：</a></li><li><a href="javascript:void(0);" data-service="weibo" class="ds-weibo">微博</a></li><li><a href="javascript:void(0);" data-service="qzone" class="ds-qzone">QQ空间</a></li><li><a href="javascript:void(0);" data-service="qqt" class="ds-qqt">腾讯微博</a></li><li><a href="javascript:void(0);" data-service="wechat" class="ds-wechat">微信</a></li></ul><div class="ds-share-icons-more"></div></div></div><div data-thread-key="2017/02/27/c-basics-record-3/" data-title="C语言基础知识补习③" data-url="http://51erwa.com/2017/02/27/c-basics-record-3/" data-author-key="1" class="ds-thread"></div></div></div></div><div class="pure-u-1 pure-u-md-1-4"><div id="sidebar"><div class="widget"><div class="search-form"><input id="local-search-input" placeholder="站内搜索" type="text" name="q" results="0"/><div id="local-search-result"></div></div></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/tech/">tech</a><span class="category-list-count">6</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/C语言/" style="font-size: 15px;">C语言</a> <a href="/tags/Retrofit2-0/" style="font-size: 15px;">Retrofit2.0</a> <a href="/tags/OkHttp/" style="font-size: 15px;">OkHttp</a> <a href="/tags/RxJava/" style="font-size: 15px;">RxJava</a> <a href="/tags/RESTful/" style="font-size: 15px;">RESTful</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最新文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/02/27/c-basics-record-3/">C语言基础知识补习③</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/22/c-basics-record-2/">C语言基础知识补习②</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/18/c-basics-record-1/">C语言基础知识补习①</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/08/okhttp+rxjava-experience/">结合Retrofit2.0体验OkHttp+RxJava</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/11/retrofit2-experience/">全面体验Retrofit2.0</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/30/what-is-RESTful/">彻底理解什么是REST</a></li></ul></div><div class="widget"><div class="comments-title"><i class="fa fa-comment-o"> 最近评论</i></div><div data-num-items="5" data-show-avatars="1" data-show-time="1" data-show-admin="1" data-excerpt-length="32" data-show-title="1" class="ds-recent-comments"></div></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://wanzi.tv/" title="丸子影视" target="_blank">丸子影视</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">erwa'blog.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a> Deployed in<a rel="nofollow" target="_blank" href="https://github.com/drawf"> GitHub.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script>var duoshuoQuery = {short_name:'erwa'};
(function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
        || document.getElementsByTagName('body')[0]).appendChild(ds);
})();
</script><script type="text/javascript" src="/js/search.js?v=0.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>